{
 "cells": [
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [],
   "source": [
    "import numpy as np\n",
    "import pandas as pd"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "import chart_studio\n",
    "import chart_studio.plotly as py\n",
    "import plotly.graph_objs as go\n",
    "import plotly.io as pio"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 3,
   "metadata": {},
   "outputs": [],
   "source": [
    "temp_hist_by_country = pd.read_csv(\"https://raw.githubusercontent.com/datares/climate_change/master/temp_hist_by_country(yearly).csv\")"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 4,
   "metadata": {},
   "outputs": [],
   "source": [
    "temp_hist_by_country.iloc[:, 1] = temp_hist_by_country[\"Average Temperature (Celsius)\"].apply(round, args = (2, ))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 5,
   "metadata": {
    "scrolled": false
   },
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>Year</th>\n",
       "      <th>Average Temperature (Celsius)</th>\n",
       "      <th>Country</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1910</td>\n",
       "      <td>13.22</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>1911</td>\n",
       "      <td>13.38</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>1912</td>\n",
       "      <td>13.90</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>1913</td>\n",
       "      <td>13.86</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>1914</td>\n",
       "      <td>14.30</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>1915</td>\n",
       "      <td>14.91</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>1916</td>\n",
       "      <td>13.34</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>1917</td>\n",
       "      <td>13.92</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>1918</td>\n",
       "      <td>13.48</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>1919</td>\n",
       "      <td>13.88</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>10</th>\n",
       "      <td>1920</td>\n",
       "      <td>13.04</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>11</th>\n",
       "      <td>1921</td>\n",
       "      <td>14.17</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>12</th>\n",
       "      <td>1922</td>\n",
       "      <td>14.26</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>13</th>\n",
       "      <td>1923</td>\n",
       "      <td>13.34</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>14</th>\n",
       "      <td>1924</td>\n",
       "      <td>13.63</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>15</th>\n",
       "      <td>1925</td>\n",
       "      <td>13.93</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>16</th>\n",
       "      <td>1926</td>\n",
       "      <td>13.75</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>17</th>\n",
       "      <td>1927</td>\n",
       "      <td>13.84</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>18</th>\n",
       "      <td>1928</td>\n",
       "      <td>13.63</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19</th>\n",
       "      <td>1929</td>\n",
       "      <td>13.48</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>20</th>\n",
       "      <td>1930</td>\n",
       "      <td>13.33</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>21</th>\n",
       "      <td>1931</td>\n",
       "      <td>13.45</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>22</th>\n",
       "      <td>1932</td>\n",
       "      <td>13.66</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>23</th>\n",
       "      <td>1933</td>\n",
       "      <td>13.88</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>24</th>\n",
       "      <td>1934</td>\n",
       "      <td>13.34</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>25</th>\n",
       "      <td>1935</td>\n",
       "      <td>13.30</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>26</th>\n",
       "      <td>1936</td>\n",
       "      <td>14.01</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>27</th>\n",
       "      <td>1937</td>\n",
       "      <td>13.57</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>28</th>\n",
       "      <td>1938</td>\n",
       "      <td>14.21</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>29</th>\n",
       "      <td>1939</td>\n",
       "      <td>14.16</td>\n",
       "      <td>Afghanistan</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19540</th>\n",
       "      <td>1983</td>\n",
       "      <td>22.37</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19541</th>\n",
       "      <td>1984</td>\n",
       "      <td>21.71</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19542</th>\n",
       "      <td>1985</td>\n",
       "      <td>21.20</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19543</th>\n",
       "      <td>1986</td>\n",
       "      <td>21.20</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19544</th>\n",
       "      <td>1987</td>\n",
       "      <td>22.32</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19545</th>\n",
       "      <td>1988</td>\n",
       "      <td>21.48</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19546</th>\n",
       "      <td>1989</td>\n",
       "      <td>21.43</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19547</th>\n",
       "      <td>1990</td>\n",
       "      <td>22.13</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19548</th>\n",
       "      <td>1991</td>\n",
       "      <td>21.79</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19549</th>\n",
       "      <td>1992</td>\n",
       "      <td>22.84</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19550</th>\n",
       "      <td>1993</td>\n",
       "      <td>21.85</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19551</th>\n",
       "      <td>1994</td>\n",
       "      <td>21.61</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19552</th>\n",
       "      <td>1995</td>\n",
       "      <td>22.50</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19553</th>\n",
       "      <td>1996</td>\n",
       "      <td>21.55</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19554</th>\n",
       "      <td>1997</td>\n",
       "      <td>21.57</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19555</th>\n",
       "      <td>1998</td>\n",
       "      <td>22.14</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19556</th>\n",
       "      <td>1999</td>\n",
       "      <td>21.49</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19557</th>\n",
       "      <td>2000</td>\n",
       "      <td>21.15</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19558</th>\n",
       "      <td>2001</td>\n",
       "      <td>21.69</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19559</th>\n",
       "      <td>2002</td>\n",
       "      <td>22.08</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19560</th>\n",
       "      <td>2003</td>\n",
       "      <td>21.89</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19561</th>\n",
       "      <td>2004</td>\n",
       "      <td>21.33</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19562</th>\n",
       "      <td>2005</td>\n",
       "      <td>22.51</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19563</th>\n",
       "      <td>2006</td>\n",
       "      <td>21.62</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19564</th>\n",
       "      <td>2007</td>\n",
       "      <td>21.60</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19565</th>\n",
       "      <td>2008</td>\n",
       "      <td>21.55</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19566</th>\n",
       "      <td>2009</td>\n",
       "      <td>21.38</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19567</th>\n",
       "      <td>2010</td>\n",
       "      <td>21.99</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19568</th>\n",
       "      <td>2011</td>\n",
       "      <td>21.60</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>19569</th>\n",
       "      <td>2012</td>\n",
       "      <td>21.52</td>\n",
       "      <td>Zimbabwe</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>19570 rows Ã— 3 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "       Year  Average Temperature (Celsius)      Country\n",
       "0      1910                          13.22  Afghanistan\n",
       "1      1911                          13.38  Afghanistan\n",
       "2      1912                          13.90  Afghanistan\n",
       "3      1913                          13.86  Afghanistan\n",
       "4      1914                          14.30  Afghanistan\n",
       "5      1915                          14.91  Afghanistan\n",
       "6      1916                          13.34  Afghanistan\n",
       "7      1917                          13.92  Afghanistan\n",
       "8      1918                          13.48  Afghanistan\n",
       "9      1919                          13.88  Afghanistan\n",
       "10     1920                          13.04  Afghanistan\n",
       "11     1921                          14.17  Afghanistan\n",
       "12     1922                          14.26  Afghanistan\n",
       "13     1923                          13.34  Afghanistan\n",
       "14     1924                          13.63  Afghanistan\n",
       "15     1925                          13.93  Afghanistan\n",
       "16     1926                          13.75  Afghanistan\n",
       "17     1927                          13.84  Afghanistan\n",
       "18     1928                          13.63  Afghanistan\n",
       "19     1929                          13.48  Afghanistan\n",
       "20     1930                          13.33  Afghanistan\n",
       "21     1931                          13.45  Afghanistan\n",
       "22     1932                          13.66  Afghanistan\n",
       "23     1933                          13.88  Afghanistan\n",
       "24     1934                          13.34  Afghanistan\n",
       "25     1935                          13.30  Afghanistan\n",
       "26     1936                          14.01  Afghanistan\n",
       "27     1937                          13.57  Afghanistan\n",
       "28     1938                          14.21  Afghanistan\n",
       "29     1939                          14.16  Afghanistan\n",
       "...     ...                            ...          ...\n",
       "19540  1983                          22.37     Zimbabwe\n",
       "19541  1984                          21.71     Zimbabwe\n",
       "19542  1985                          21.20     Zimbabwe\n",
       "19543  1986                          21.20     Zimbabwe\n",
       "19544  1987                          22.32     Zimbabwe\n",
       "19545  1988                          21.48     Zimbabwe\n",
       "19546  1989                          21.43     Zimbabwe\n",
       "19547  1990                          22.13     Zimbabwe\n",
       "19548  1991                          21.79     Zimbabwe\n",
       "19549  1992                          22.84     Zimbabwe\n",
       "19550  1993                          21.85     Zimbabwe\n",
       "19551  1994                          21.61     Zimbabwe\n",
       "19552  1995                          22.50     Zimbabwe\n",
       "19553  1996                          21.55     Zimbabwe\n",
       "19554  1997                          21.57     Zimbabwe\n",
       "19555  1998                          22.14     Zimbabwe\n",
       "19556  1999                          21.49     Zimbabwe\n",
       "19557  2000                          21.15     Zimbabwe\n",
       "19558  2001                          21.69     Zimbabwe\n",
       "19559  2002                          22.08     Zimbabwe\n",
       "19560  2003                          21.89     Zimbabwe\n",
       "19561  2004                          21.33     Zimbabwe\n",
       "19562  2005                          22.51     Zimbabwe\n",
       "19563  2006                          21.62     Zimbabwe\n",
       "19564  2007                          21.60     Zimbabwe\n",
       "19565  2008                          21.55     Zimbabwe\n",
       "19566  2009                          21.38     Zimbabwe\n",
       "19567  2010                          21.99     Zimbabwe\n",
       "19568  2011                          21.60     Zimbabwe\n",
       "19569  2012                          21.52     Zimbabwe\n",
       "\n",
       "[19570 rows x 3 columns]"
      ]
     },
     "execution_count": 5,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "temp_hist_by_country"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 6,
   "metadata": {},
   "outputs": [],
   "source": [
    "year = 1910"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 7,
   "metadata": {},
   "outputs": [],
   "source": [
    "scl = [[0.11, '#ff0000'], [0.22, '#0099cc'], [0.33, '#33ccff'], [0.44, '#99e6ff'], [0.55, '#ffffff'], \n",
    "       [0.66, '#ffbb99'], [0.77, '#ff7733'], [0.88, '#cc4400'], [0.99, '#0000ff']]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 8,
   "metadata": {},
   "outputs": [],
   "source": [
    "countries = temp_hist_by_country.loc[temp_hist_by_country[\"Year\"] == year, \"Country\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 9,
   "metadata": {},
   "outputs": [],
   "source": [
    "avgt = temp_hist_by_country.loc[temp_hist_by_country[\"Year\"] == year, \"Average Temperature (Celsius)\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 10,
   "metadata": {},
   "outputs": [],
   "source": [
    "data = [dict(\n",
    "            type = 'choropleth',\n",
    "            colorscale = scl,\n",
    "            autocolorscale = False,\n",
    "            locations = countries,\n",
    "            text = \"Average Temperature (Celsius)\",\n",
    "            z = avgt,\n",
    "            locationmode = 'country names',\n",
    "            marker = dict(line = dict(color = 'rgb(0,0,0)', width = 2)),\n",
    "            colorbar = dict(title = 'Temperature, Celsius')\n",
    "            )\n",
    "       ]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 11,
   "metadata": {},
   "outputs": [],
   "source": [
    "layout = dict(\n",
    "    title = 'Average Temperature by Country, 1910',\n",
    "    geo = dict(showframe = False,\n",
    "               showocean = True,\n",
    "               oceancolor = 'rgb(0,255,255)',\n",
    "               projection = dict(type = 'orthographic'),\n",
    "              )\n",
    "             )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [],
   "source": [
    "fig = dict(data = data, layout = layout)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [],
   "source": [
    "pio.write_html(fig, file = 'graph1.html', auto_open = True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [],
   "source": [
    "data_slider = []"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [],
   "source": [
    "for each_y in temp_hist_by_country.Year.unique():\n",
    "    data_one_year = dict(type = 'choropleth',\n",
    "                         colorscale = scl,\n",
    "                         autocolorscale = False,\n",
    "                         locations = countries,\n",
    "                         text = \"Year: \" + str(each_y),\n",
    "                         z = temp_hist_by_country.loc[temp_hist_by_country[\"Year\"] == each_y, \"Average Temperature (Celsius)\"],\n",
    "                         zmin = -20,\n",
    "                         zmax = 30,\n",
    "                         locationmode = 'country names',\n",
    "                         marker = dict(line = dict(color = 'rgb(0,0,0)', width = 1)),\n",
    "                         colorbar = dict(title = 'Temperature, Celsius')\n",
    "                        )\n",
    "    data_slider.append(data_one_year)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 16,
   "metadata": {},
   "outputs": [],
   "source": [
    "steps = []"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 17,
   "metadata": {},
   "outputs": [],
   "source": [
    "for i in range(len(data_slider)):\n",
    "    step = dict(method = 'restyle',\n",
    "                args = ['visible', [False] * len(data_slider)],\n",
    "                label = 'Year {}'.format(i + 1910)) \n",
    "    step['args'][1][i] = True\n",
    "    steps.append(step)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 18,
   "metadata": {},
   "outputs": [],
   "source": [
    "sliders = [dict(active = 0, pad = {\"t\": 1}, steps = steps)]  "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 19,
   "metadata": {},
   "outputs": [],
   "source": [
    "layout = dict(\n",
    "              title = 'Average Annual Temperature by Country, 1910-2012',\n",
    "              geo = dict(showframe = False,\n",
    "                         showocean = True,\n",
    "                         oceancolor = 'rgb(0,255,255)',\n",
    "                         projection = dict(type = 'orthographic'),\n",
    "                        ),\n",
    "              sliders = sliders\n",
    "             )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 20,
   "metadata": {},
   "outputs": [],
   "source": [
    "fig = dict(data = data_slider, layout = layout) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 21,
   "metadata": {
    "scrolled": false
   },
   "outputs": [],
   "source": [
    "pio.write_html(fig, file = 'graph2.html', auto_open = True)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 22,
   "metadata": {},
   "outputs": [],
   "source": [
    "scl2 = [[0.25, '#ffffff'],[0.50, '#ff8080'],[0.75, '#ff0000'],[1.00, '#800000']]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 23,
   "metadata": {},
   "outputs": [],
   "source": [
    "past = temp_hist_by_country.loc[temp_hist_by_country[\"Year\"] == 1910, \"Average Temperature (Celsius)\"]"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 24,
   "metadata": {},
   "outputs": [],
   "source": [
    "data_slider2 = []"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 25,
   "metadata": {},
   "outputs": [],
   "source": [
    "for each_y in temp_hist_by_country.Year.unique():\n",
    "    data_one_year = dict(type = 'choropleth',\n",
    "                         colorscale = scl2,\n",
    "                         autocolorscale = False,\n",
    "                         locations = countries,\n",
    "                         text = \"Year: \" + str(each_y),\n",
    "                         z = temp_hist_by_country.loc[temp_hist_by_country[\"Year\"] == each_y, \"Average Temperature (Celsius)\"].values - past.values,\n",
    "                         zmin = -5,\n",
    "                         zmax = 5,\n",
    "                         locationmode = 'country names',\n",
    "                         marker = dict(line = dict(color = 'rgb(0,0,0)', width = 1)),\n",
    "                         colorbar = dict(title = 'Change in Temperature, Celsius')\n",
    "                        )\n",
    "    data_slider2.append(data_one_year)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 26,
   "metadata": {},
   "outputs": [],
   "source": [
    "steps2 = []"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 27,
   "metadata": {},
   "outputs": [],
   "source": [
    "for i in range(len(data_slider2)):\n",
    "    step = dict(method = 'restyle',\n",
    "                args = ['visible', [False] * len(data_slider)],\n",
    "                label = 'Year {}'.format(i + 1910)) \n",
    "    step['args'][1][i] = True\n",
    "    steps2.append(step)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 28,
   "metadata": {},
   "outputs": [],
   "source": [
    "sliders2 = [dict(active = 0, pad = {\"t\": 1}, steps = steps2)]  "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 29,
   "metadata": {},
   "outputs": [],
   "source": [
    "layout2 = dict(\n",
    "              title = 'Average Annual Temperature by Country, 1910 vs. Future Year',\n",
    "              geo = dict(showframe = False,\n",
    "                         showocean = True,\n",
    "                         oceancolor = 'rgb(0,255,255)',\n",
    "                         projection = dict(type = 'equirectangular'),\n",
    "                        ),\n",
    "              sliders = sliders2,\n",
    "             )"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 30,
   "metadata": {},
   "outputs": [],
   "source": [
    "fig2 = dict(data = data_slider2, layout = layout2) "
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 31,
   "metadata": {},
   "outputs": [],
   "source": [
    "pio.write_html(fig2, file = 'graph3.html', auto_open = True)"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.7.0"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 2
}
